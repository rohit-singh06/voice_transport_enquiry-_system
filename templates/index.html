<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Transport Finder - Night Mode</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸšŒ</text></svg>">
  <meta name="description" content="Find the best transport options with voice or manual search.">
</head>
<body>
  <!-- animated background layers -->
  <div id="bg-wrap">
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    <div class="bg-lights"></div>
    <div class="floating-icons" aria-hidden="true">ğŸšŒğŸš†ğŸš—ğŸšğŸšğŸšğŸš‹ğŸš–ğŸš•ğŸš“ğŸš‘</div>
  </div>

  <!-- Nav -->
  <nav class="top-nav">
    <div class="nav-left">
      <span class="brand-icon">ğŸšŒ</span>
      <div class="brand-stack">
        <span class="brand-text">Smart Transport</span>
        <span class="brand-subtext">Voice â€¢ Realtime â€¢ Insights</span>
      </div>
    </div>
    <div class="nav-right">
      <a class="nav-item" href="#search">
        <span class="nav-icon">ğŸ”</span> Search
      </a>
      <a class="nav-item" id="help-btn" href="#">
        <span class="nav-icon">â“</span> Help
      </a>
      {% if is_admin %}
      <a class="nav-item" href="{{ url_for('admin_dashboard') }}">
        <span class="nav-icon">ğŸ› </span> Admin
      </a>
      {% endif %}
      <a class="nav-item" id="bookmark-link" href="#bookmarks" title="Bookmarks">
        <span class="nav-icon">â­</span> Bookmarks
      </a>
      <a class="nav-item logout" href="/logout">
        <span class="nav-icon">ğŸšª</span> Logout
      </a>
      <div class="user-pill">
        <span class="user-avatar">ğŸ‘¤</span>
        <div>
          <p class="user-name">{{ user_name or 'Traveler' }}</p>
          <p class="user-role">{{ 'Admin' if is_admin else 'Explorer' }}</p>
        </div>
      </div>
    </div>
  </nav>

  <!-- main app -->
  <main class="app-container">
    <section class="status-strip">
      <article class="status-pill">
        <span class="pill-icon">ğŸ•’</span>
        <div>
          <p class="pill-label">Local Time</p>
          <p class="pill-value" id="status-time">--:--</p>
        </div>
      </article>
      <article class="status-pill">
        <span class="pill-icon">ğŸ“…</span>
        <div>
          <p class="pill-label">Today</p>
          <p class="pill-value" id="status-date">--</p>
        </div>
      </article>
      <article class="status-pill">
        <span class="pill-icon">ğŸ“¶</span>
        <div>
          <p class="pill-label">Network</p>
          <p class="pill-value" id="status-network">Checkingâ€¦</p>
        </div>
      </article>
    </section>
    <header class="app-header">
      <h1><span class="title-icon">ğŸšŒ</span><span class="title-text">Smart Transport Finder</span></h1>
      <p class="subtitle">Voice-based transport enquiry </p>
    </header>

    <section class="insight-grid">
      <article class="insight-card">
        <div class="insight-icon">ğŸ§</div>
        <div>
          <p class="insight-label">Voice Ready</p>
          <p class="insight-value">Say â€œNext bus from Jaipurâ€</p>
        </div>
      </article>
      <article class="insight-card">
        <div class="insight-icon">ğŸ“¡</div>
        <div>
          <p class="insight-label">Live Availability</p>
          <p class="insight-value">Seats updated every request</p>
        </div>
      </article>
      <article class="insight-card">
        <div class="insight-icon">ğŸ’°</div>
        <div>
          <p class="insight-label">Dynamic Fares</p>
          <p class="insight-value">Based on operator + demand</p>
        </div>
      </article>
    </section>

    <section class="controls glass-card" id="search">
      <div class="controls-row">
        <div class="field">
          <label for="source">ğŸ“ From</label>
          <div class="input-with-icon">
            <input id="source" type="text" placeholder="Enter source (city, station)" autocomplete="off">
            <span class="field-icon">ğŸ“</span>
          </div>
        </div>

        <div class="field">
          <label for="destination">ğŸ¯ To</label>
          <div class="input-with-icon">
            <input id="destination" type="text" placeholder="Enter destination" autocomplete="off">
            <span class="field-icon">ğŸ¯</span>
          </div>
        </div>

        <div class="field small">
          <label for="transport-type">ğŸšŒ Type</label>
          <div class="input-with-icon">
            <select id="transport-type">
              <option value="">All</option>
              <option value="bus">Bus</option>
              <option value="train">Train</option>
            </select>
            <span class="field-icon">ğŸ›£ï¸</span>
          </div>
        </div>

        <div class="field small">
          <label for="date">ğŸ“… Date</label>
          <div class="input-with-icon">
            <input id="date" type="date">
            <span class="field-icon">ğŸ“…</span>
          </div>
        </div>
      </div>

      <div class="controls-row actions">
        <button id="search-btn" class="btn primary ripple">
          <span class="btn-icon">ğŸ”</span>
          <span>Search Transport</span>
          <span class="loading hidden" id="search-loading"></span>
        </button>

        <button id="voice-btn" class="btn ghost" title="Use voice">
          <span id="mic-icon" class="mic">ğŸ¤</span>
          <span id="voice-label">Voice</span>
        </button>

        <button id="history-btn" class="btn ghost" title="Recent searches">ğŸ•“ Recent</button>

        <div class="toggle-language">
          <label for="language-select">ğŸŒ</label>
          <select id="language-select">
            <option value="en">EN</option>
            <option value="hi">HI</option>
          </select>
        </div>
      </div>

      <!-- voice hint -->
      <div id="voice-hint" class="voice-hint hidden">Say: "Bus from Mumbai to Delhi"</div>

      <div class="chip-row">
        <button class="quick-chip" data-src="Dehradun" data-dst="Delhi" data-type="bus">ğŸšŒ Dehradun âœ Delhi</button>
        <button class="quick-chip" data-src="Mumbai" data-dst="Pune" data-type="train">ğŸš† Mumbai âœ Pune</button>
        <button class="quick-chip" data-src="Bengaluru" data-dst="Chennai" data-type="">âš¡ Evening Express</button>
        <button class="quick-chip" data-src="Jaipur" data-dst="Kota" data-type="bus">ğŸ•˜ Next Bus</button>
      </div>
      <div class="scenario-badges">
        <button class="scenario-chip" data-src="Delhi" data-dst="Chandigarh" data-type="bus" data-tag="morning">
          <span>ğŸŒ… Morning Rush</span>
          <small>Earliest departures</small>
        </button>
        <button class="scenario-chip" data-src="Hyderabad" data-dst="Goa" data-type="" data-tag="weekend">
          <span>ğŸ‰ Weekend Escape</span>
          <small>Sleeper & AC coaches</small>
        </button>
        <button class="scenario-chip" data-src="Lucknow" data-dst="Kanpur" data-type="train" data-tag="budget">
          <span>ğŸ’¸ Budget Saver</span>
          <small>Lowest fare first</small>
        </button>
      </div>
    </section>

    <section class="assistant-banner">
      <div class="assistant-icon">ğŸ¤–</div>
      <div class="assistant-copy">
        <p class="assistant-title">Tip</p>
        <p class="assistant-text">Hold spacebar to start voice input anytime.</p>
      </div>
      <button class="assistant-action" id="assistant-help">See Commands</button>
    </section>

    <!-- results -->
    <section id="results-container" class="results"></section>

    <!-- footer -->
    <footer class="app-footer">
      <p>Powered by Smart Transport Finder</p>
    </footer>
  </main>

  <!-- Recent searches slide-up -->
  <aside id="history-panel" class="history-panel hidden">
    <div class="history-header">
      <h3>Recent Searches</h3>
      <button id="close-history" class="btn small">Close</button>
    </div>
    <ul id="history-list" class="history-list"></ul>
  </aside>

 
<!-- â­ Bookmarks Modal -->
<div id="bookmarks-overlay" class="bookmarks-overlay">
  <aside id="bookmarks-panel" class="bookmarks-panel">
    <div class="bookmarks-header">
      <h3>â­ My Bookmarked Schedules</h3>
      <button id="close-bookmarks" class="btn small">âœ– Close</button>
    </div>
    <ul id="bookmarks-list" class="bookmarks-list"></ul>
  </aside>
</div>

<!-- Trip Details Modal -->
<div id="details-modal" class="details-overlay hidden">
  <div class="details-card">
    <h3 id="details-operator"></h3>
    <p><strong>Type:</strong> <span id="details-type"></span></p>
    <p><strong>Departure:</strong> <span id="details-departure"></span></p>
    <p><strong>Arrival:</strong> <span id="details-arrival"></span></p>
    <p><strong>Distance:</strong> <span id="details-distance"></span> km</p>
    <p><strong>Fare:</strong> â‚¹<span id="details-fare"></span></p>
    <p><strong>Date:</strong> <span id="details-date"></span></p>
    <button id="close-details" class="btn small">Close</button>
  </div>
</div>
<!-- ================== HELP POPUP ================== -->
<div id="help-overlay" class="help-overlay ">
  <aside id="help-panel" class="help-panel">
    <div class="help-header">
      <h3>â“ Help & Instructions</h3>
      <button id="help-close" class="btn small">âœ– Close</button>

    </div>

    <div class="help-content">
      <h4>ğŸ¤ Voice Commands</h4>
      <ul>
        <li>â€œBus from Dehradun to Delhiâ€</li>
        <li>â€œTrain from Mumbai to Pune tomorrowâ€</li>
        <li>â€œBus from Noida to Agra on 15 Novemberâ€</li>
        <li>â€œNext bus from Jaipur to Kotaâ€</li>
        <li>â€œTrains from Chennai to Bangalore between 6 AM and 10 AMâ€</li>
        <li>â€œBus from Chandigarh to Shimla after 5 PMâ€</li>
        <li>â€œShow buses from Lucknow to Kanpur day after tomorrowâ€</li>
      </ul>

      <h4>ğŸ“… Date Understanding</h4>
      <ul>
        <li>Today</li>
        <li>Tomorrow</li>
        <li>Day after tomorrow</li>
        <li>Specific dates like â€œon 12 Januaryâ€</li>
      </ul>

      <h4>â± Time Filters</h4>
      <ul>
        <li>â€œBetween 6 AM and 9 AMâ€</li>
        <li>â€œAfter 5 PMâ€</li>
        <li>â€œNext train to Delhiâ€ â†’ shows upcoming departures</li>
      </ul>

      <h4>â­ Bookmarks</h4>
      <p>Bookmark any schedule and view them anytime in the â­ Bookmarks section.</p>

      <h4>ğŸ’° Fare Calculation</h4>
      <ul>
        <li>Bus Type (Volvo, AC, Sleeper, Ordinary)</li>
        <li>Operator multipliers (UPSRTC, MSRTC, KSRTC etc.)</li>
        <li>Seat availability impact</li>
        <li>Peak hours pricing (6â€“9 AM, 5â€“9 PM)</li>
      </ul>

      <h4>â„¹ About</h4>
      <p>
        Smart Transport Finder is a modern, voice-enabled system for discovering 
        buses and trains with real-time dynamic fare calculation and personalized results.
      </p>
    </div>
  </aside>
</div>


<!-- Floating toolbelt -->
<div class="floating-toolbelt">
  <button class="toolbelt-btn" data-action="voice" title="Start voice search">ğŸ™ï¸</button>
  <button class="toolbelt-btn" data-action="history" title="Recent searches">ğŸ•“</button>
  <button class="toolbelt-btn" data-action="bookmarks" title="View bookmarks">â­</button>
  <button class="toolbelt-btn" data-action="help" title="Help & commands">â“</button>
</div>

<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>

